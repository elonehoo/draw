(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function nt(t,e,s,r=n=>n){return t*r(.5-e*(.5-s))}function Lt(t){return[-t[0],-t[1]]}function S(t,e){return[t[0]+e[0],t[1]+e[1]]}function x(t,e){return[t[0]-e[0],t[1]-e[1]]}function b(t,e){return[t[0]*e,t[1]*e]}function Pt(t,e){return[t[0]/e,t[1]/e]}function z(t){return[t[1],-t[0]]}function _t(t,e){return t[0]*e[0]+t[1]*e[1]}function Mt(t,e){return t[0]===e[0]&&t[1]===e[1]}function kt(t){return Math.hypot(t[0],t[1])}function It(t){return t[0]*t[0]+t[1]*t[1]}function it(t,e){return It(x(t,e))}function wt(t){return Pt(t,kt(t))}function At(t,e){return Math.hypot(t[1]-e[1],t[0]-e[0])}function T(t,e,s){let r=Math.sin(s),n=Math.cos(s),i=t[0]-e[0],h=t[1]-e[1],o=i*n-h*r,l=i*r+h*n;return[o+e[0],l+e[1]]}function Z(t,e,s){return S(t,b(x(e,t),s))}function ot(t,e,s){return S(t,b(e,s))}var{min:F,PI:Ct}=Math,ht=.275,R=Ct+1e-4;function Nt(t,e={}){let{size:s=16,smoothing:r=.5,thinning:n=.5,simulatePressure:i=!0,easing:h=a=>a,start:o={},end:l={},last:g=!1}=e,{cap:E=!0,easing:w=a=>a*(2-a)}=o,{cap:C=!0,easing:m=a=>--a*a*a+1}=l;if(t.length===0||s<=0)return[];let u=t[t.length-1].runningLength,v=o.taper===!1?0:o.taper===!0?Math.max(s,u):o.taper,P=l.taper===!1?0:l.taper===!0?Math.max(s,u):l.taper,W=Math.pow(s*r,2),K=[],N=[],V=t.slice(0,10).reduce((a,p)=>{let c=p.pressure;if(i){let f=F(1,p.distance/s),j=F(1,1-f);c=F(1,a+(j-a)*(f*ht))}return(a+c)/2},t[0].pressure),y=nt(s,n,t[t.length-1].pressure,h),X,tt=t[0].vector,B=t[0].point,q=B,I=B,A=q;for(let a=0;a<t.length;a++){let{pressure:p}=t[a],{point:c,vector:f,distance:j,runningLength:$}=t[a];if(a<t.length-1&&u-$<3)continue;if(n){if(i){let k=F(1,j/s),Q=F(1,1-k);p=F(1,V+(Q-V)*(k*ht))}y=nt(s,n,p,h)}else y=s/2;X===void 0&&(X=y);let bt=$<v?w($/v):1,St=u-$<P?m((u-$)/P):1;if(y=Math.max(.01,y*Math.min(bt,St)),a===t.length-1){let k=b(z(f),y);K.push(x(c,k)),N.push(S(c,k));continue}let et=t[a+1].vector,st=_t(f,et);if(st<0){let k=b(z(tt),y);for(let Q=1/13,G=0;G<=1;G+=Q)I=T(x(c,k),c,R*G),K.push(I),A=T(S(c,k),c,R*-G),N.push(A);B=I,q=A;continue}let rt=b(z(Z(et,f,st)),y);I=x(c,rt),(a<=1||it(B,I)>W)&&(K.push(I),B=I),A=S(c,rt),(a<=1||it(q,A)>W)&&(N.push(A),q=A),V=p,tt=f}let _=t[0].point.slice(0,2),M=t.length>1?t[t.length-1].point.slice(0,2):S(t[0].point,[1,1]),Y=[],U=[];if(t.length===1){if(!(v||P)||g){let a=ot(_,wt(z(x(_,M))),-(X||y)),p=[];for(let c=1/13,f=c;f<=1;f+=c)p.push(T(a,_,R*2*f));return p}}else{if(!(v||P&&t.length===1))if(E)for(let p=1/13,c=p;c<=1;c+=p){let f=T(N[0],_,R*c);Y.push(f)}else{let p=x(K[0],N[0]),c=b(p,.5),f=b(p,.51);Y.push(x(_,c),x(_,f),S(_,f),S(_,c))}let a=z(Lt(t[t.length-1].vector));if(P||v&&t.length===1)U.push(M);else if(C){let p=ot(M,a,y);for(let c=1/29,f=c;f<1;f+=c)U.push(T(p,M,R*3*f))}else U.push(S(M,b(a,y)),S(M,b(a,y*.99)),x(M,b(a,y*.99)),x(M,b(a,y)))}return K.concat(U,N.reverse(),Y)}function Ft(t,e={}){var s;let{streamline:r=.5,size:n=16,last:i=!1}=e;if(t.length===0)return[];let h=.15+(1-r)*.85,o=Array.isArray(t[0])?t:t.map(({x:m,y:u,pressure:v=.5})=>[m,u,v]);if(o.length===2){let m=o[1];o=o.slice(0,-1);for(let u=1;u<5;u++)o.push(Z(o[0],m,u/4))}o.length===1&&(o=[...o,[...S(o[0],[1,1]),...o[0].slice(2)]]);let l=[{point:[o[0][0],o[0][1]],pressure:o[0][2]>=0?o[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],g=!1,E=0,w=l[0],C=o.length-1;for(let m=1;m<o.length;m++){let u=i&&m===C?o[m].slice(0,2):Z(w.point,o[m],h);if(Mt(w.point,u))continue;let v=At(u,w.point);if(E+=v,m<C&&!g){if(E<n)continue;g=!0}w={point:u,pressure:o[m][2]>=0?o[m][2]:.5,vector:wt(x(w.point,u)),distance:v,runningLength:E},l.push(w)}return l[0].vector=((s=l[1])==null?void 0:s.vector)||[0,0],l}function Dt(t,e={}){return Nt(Ft(t,e),e)}var Kt=()=>({events:{},emit(t,...e){let s=this.events[t]||[];for(let r=0,n=s.length;r<n;r++)s[r](...e)},on(t,e){var s;return(s=this.events[t])!=null&&s.push(e)||(this.events[t]=[e]),()=>{var r;this.events[t]=(r=this.events[t])==null?void 0:r.filter(n=>e!==n)}}});function H(t,e){return t-e}function Bt(t){return t<0?-1:1}function O(t){return[Math.abs(t),Bt(t)]}function xt(){const t=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${t()+t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}var $t=2,L=$t,D=class{constructor(t){this.drauu=t,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onSelected(t){}onUnselected(){}onStart(t){}onMove(t){return!1}onEnd(t){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}get svgElement(){return this.drauu.el}getMousePosition(t){var n;var e;const s=this.drauu.el,r=(n=this.drauu.options.coordinateScale)!=null?n:1;if(this.drauu.options.coordinateTransform===!1){const i=this.drauu.el.getBoundingClientRect();return{x:(t.pageX-i.left)*r,y:(t.pageY-i.top)*r,pressure:t.pressure}}else{const i=this.drauu.svgPoint;i.x=t.clientX,i.y=t.clientY;const h=i.matrixTransform((e=s.getScreenCTM())==null?void 0:e.inverse());return{x:h.x*r,y:h.y*r,pressure:t.pressure}}}createElement(t,e){var n;const s=document.createElementNS("http://www.w3.org/2000/svg",t),r=e?{...this.brush,...e}:this.brush;return s.setAttribute("fill",(n=r.fill)!=null?n:"transparent"),s.setAttribute("stroke",r.color),s.setAttribute("stroke-width",r.size.toString()),s.setAttribute("stroke-linecap","round"),r.dasharray&&s.setAttribute("stroke-dasharray",r.dasharray),s}attr(t,e){this.el.setAttribute(t,typeof e=="string"?e:e.toFixed(L))}_setEvent(t){this.event=t,this.point=this.getMousePosition(t)}_eventDown(t){return this._setEvent(t),this.start=this.point,this.onStart(this.point)}_eventMove(t){return this._setEvent(t),this.onMove(this.point)}_eventUp(t){return this._setEvent(t),this.onEnd(this.point)}},zt=class extends D{constructor(){super(...arguments),this.points=[]}onStart(t){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[t],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(t){return this.el||this.onStart(t),this.points[this.points.length-1]!==t&&this.points.push(t),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const t=this.el;return this.el=null,!!t}getSvgData(t){const e=Dt(t,{size:this.brush.size*2,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5},...this.brush.stylusOptions});if(!e.length)return"";const s=e.reduce((r,[n,i],h,o)=>{const[l,g]=o[(h+1)%o.length];return r.push(n,i,(n+l)/2,(i+g)/2),r},["M",...e[0],"Q"]);return s.push("Z"),s.map(r=>typeof r=="number"?r.toFixed(2):r).join(" ")}},Tt=class extends D{onStart(t){return this.el=this.createElement("ellipse"),this.attr("cx",t.x),this.attr("cy",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[e,s]=O(t.x-this.start.x),[r,n]=O(t.y-this.start.y);if(this.shiftPressed){const i=Math.min(e,r);e=i,r=i}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",e),this.attr("ry",r);else{const[i,h]=[this.start.x,this.start.x+e*s].sort(H),[o,l]=[this.start.y,this.start.y+r*n].sort(H);this.attr("cx",(i+h)/2),this.attr("cy",(o+l)/2),this.attr("rx",(h-i)/2),this.attr("ry",(l-o)/2)}return!0}onEnd(){const t=this.el;return this.el=null,!(!t||!t.getTotalLength())}};function Et(t,e){const s=document.createElementNS("http://www.w3.org/2000/svg","defs"),r=document.createElementNS("http://www.w3.org/2000/svg","marker"),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("fill",e),r.setAttribute("id",t),r.setAttribute("viewBox","0 -5 10 10"),r.setAttribute("refX","5"),r.setAttribute("refY","0"),r.setAttribute("markerWidth","4"),r.setAttribute("markerHeight","4"),r.setAttribute("orient","auto"),n.setAttribute("d","M0,-5L10,0L0,5"),r.appendChild(n),s.appendChild(r),s}var Rt=class extends D{onStart(t){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",t.x),this.attr("y1",t.y),this.attr("x2",t.x),this.attr("y2",t.y),this.brush.arrowEnd){const e=xt(),s=document.createElementNS("http://www.w3.org/2000/svg","g");return s.append(Et(e,this.brush.color)),s.append(this.el),this.attr("marker-end",`url(#${e})`),s}return this.el}onMove(t){if(!this.el)return!1;let{x:e,y:s}=t;if(this.shiftPressed){const r=t.x-this.start.x,n=t.y-this.start.y;if(n!==0){let i=r/n;i=Math.round(i),Math.abs(i)<=1?(e=this.start.x+n*i,s=this.start.y+n):(e=this.start.x+r,s=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-e),this.attr("y1",this.start.y*2-s),this.attr("x2",e),this.attr("y2",s)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",e),this.attr("y2",s)),!0}onEnd(){const t=this.el;return this.el=null,!(!t||t.getTotalLength()<5)}},qt=class extends D{onStart(t){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",t.x),this.attr("y",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[e,s]=O(t.x-this.start.x),[r,n]=O(t.y-this.start.y);if(this.shiftPressed){const i=Math.min(e,r);e=i,r=i}if(this.altPressed)this.attr("x",this.start.x-e),this.attr("y",this.start.y-r),this.attr("width",e*2),this.attr("height",r*2);else{const[i,h]=[this.start.x,this.start.x+e*s].sort(H),[o,l]=[this.start.y,this.start.y+r*n].sort(H);this.attr("x",i),this.attr("y",o),this.attr("width",h-i),this.attr("height",l-o)}return!0}onEnd(){const t=this.el;return this.el=null,!(!t||!t.getTotalLength())}};function Ut(t,e){const s=t.x-e.x,r=t.y-e.y;return s*s+r*r}function Gt(t,e,s){let r=e.x,n=e.y,i=s.x-r,h=s.y-n;if(i!==0||h!==0){const o=((t.x-r)*i+(t.y-n)*h)/(i*i+h*h);o>1?(r=s.x,n=s.y):o>0&&(r+=i*o,n+=h*o)}return i=t.x-r,h=t.y-n,i*i+h*h}function Ht(t,e){let s=t[0];const r=[s];let n;for(let i=1,h=t.length;i<h;i++)n=t[i],Ut(n,s)>e&&(r.push(n),s=n);return s!==n&&n&&r.push(n),r}function J(t,e,s,r,n){let i=r,h=0;for(let o=e+1;o<s;o++){const l=Gt(t[o],t[e],t[s]);l>i&&(h=o,i=l)}i>r&&(h-e>1&&J(t,e,h,r,n),n.push(t[h]),s-h>1&&J(t,h,s,r,n))}function Ot(t,e){const s=t.length-1,r=[t[0]];return J(t,0,s,e,r),r.push(t[s]),r}function lt(t,e,s=!1){if(t.length<=2)return t;const r=e!==void 0?e*e:1;return t=s?t:Ht(t,r),t=Ot(t,r),t}var Vt=class extends D{constructor(){super(...arguments),this.points=[],this.count=0}onStart(t){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[t],this.brush.arrowEnd){this.arrowId=xt();const e=Et(this.arrowId,this.brush.color);this.el.appendChild(e)}return this.el}onMove(t){return this.el||this.onStart(t),this.points[this.points.length-1]!==t&&(this.points.push(t),this.count+=1),this.count>5&&(this.points=lt(this.points,1,!0),this.count=0),this.attr("d",ut(this.points)),!0}onEnd(){const t=this.el;return this.el=null,!(!t||(t.setAttribute("d",ut(lt(this.points,1,!0))),!t.getTotalLength()))}};function Xt(t,e){const s=e.x-t.x,r=e.y-t.y;return{length:Math.sqrt(Math.pow(s,2)+Math.pow(r,2)),angle:Math.atan2(r,s)}}function at(t,e,s,r){const n=e||t,i=s||t,h=.2,o=Xt(n,i),l=o.angle+(r?Math.PI:0),g=o.length*h,E=t.x+Math.cos(l)*g,w=t.y+Math.sin(l)*g;return{x:E,y:w}}function Yt(t,e,s){const r=at(s[e-1],s[e-2],t),n=at(t,s[e-1],s[e+1],!0);return`C ${r.x.toFixed(L)},${r.y.toFixed(L)} ${n.x.toFixed(L)},${n.y.toFixed(L)} ${t.x.toFixed(L)},${t.y.toFixed(L)}`}function ut(t){return t.reduce((e,s,r,n)=>r===0?`M ${s.x.toFixed(L)},${s.y.toFixed(L)}`:`${e} ${Yt(s,r,n)}`,"")}var jt=class extends D{constructor(){super(...arguments),this.pathSubFactor=20,this.pathFragments=[]}onSelected(t){const e=(s,r)=>{if(s&&s.length)for(let n=0;n<s.length;n++){const i=s[n];if(i.getTotalLength){const h=i.getTotalLength();for(let o=0;o<this.pathSubFactor;o++){const l=i.getPointAtLength(h*o/this.pathSubFactor),g=i.getPointAtLength(h*(o+1)/this.pathSubFactor);this.pathFragments.push({x1:l.x,x2:g.x,y1:l.y,y2:g.y,segment:o,element:r||i})}}else i.children&&e(i.children,i)}};t&&e(t.children)}onUnselected(){this.pathFragments=[]}onStart(t){this.svgPointPrevious=this.svgElement.createSVGPoint(),this.svgPointPrevious.x=t.x,this.svgPointPrevious.y=t.y}onMove(t){this.svgPointCurrent=this.svgElement.createSVGPoint(),this.svgPointCurrent.x=t.x,this.svgPointCurrent.y=t.y;const e=this.checkAndEraseElement();return this.svgPointPrevious=this.svgPointCurrent,e}onEnd(){return this.svgPointPrevious=void 0,this.svgPointCurrent=void 0,!0}checkAndEraseElement(){const t=[];if(this.pathFragments.length)for(let e=0;e<this.pathFragments.length;e++){const s=this.pathFragments[e],r={x1:this.svgPointPrevious.x,x2:this.svgPointCurrent.x,y1:this.svgPointPrevious.y,y2:this.svgPointCurrent.y};this.lineLineIntersect(s,r)&&(s.element.remove(),t.push(e))}return t.length&&(this.pathFragments=this.pathFragments.filter((e,s)=>!t.includes(s))),t.length>0}lineLineIntersect(t,e){const s=t.x1,r=t.x2,n=e.x1,i=e.x2,h=t.y1,o=t.y2,l=e.y1,g=e.y2,E=(s-r)*(l-g)-(h-o)*(n-i),w=(s*o-h*r)*(n-i)-(s-r)*(n*g-l*i),C=(s*o-h*r)*(l-g)-(h-o)*(n*g-l*i),m=(u,v,P)=>u>=v&&u<=P?!0:u>=P&&u<=v;if(E===0)return!1;{const u={x:w/E,y:C/E};return m(u.x,s,r)&&m(u.y,h,o)&&m(u.x,n,i)&&m(u.y,l,g)}}};function Qt(t){return{draw:new Vt(t),stylus:new zt(t),line:new Rt(t),rectangle:new qt(t),ellipse:new Tt(t),eraseLine:new jt(t)}}var Zt=class{constructor(t={}){this.options=t,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=Kt(),this._models=Qt(this),this._undoStack=[],this._disposables=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),t.el&&this.mount(t.el,t.eventTarget)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(t){this._models[this.mode].onUnselected(),this.options.brush.mode=t,this.model.onSelected(this.el)}get brush(){return this.options.brush}set brush(t){this.options.brush=t}resolveSelector(t){return typeof t=="string"?document.querySelector(t):t||null}mount(t,e){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(t),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/svg', 'svg')");this.svgPoint=this.el.createSVGPoint();const s=this.resolveSelector(e)||this.el,r=this.eventStart.bind(this),n=this.eventMove.bind(this),i=this.eventEnd.bind(this),h=this.eventKeyboard.bind(this);s.addEventListener("pointerdown",r,{passive:!1}),window.addEventListener("pointermove",n,{passive:!1}),window.addEventListener("pointerup",i,{passive:!1}),window.addEventListener("pointercancel",i,{passive:!1}),window.addEventListener("keydown",h,!1),window.addEventListener("keyup",h,!1),this._disposables.push(()=>{s.removeEventListener("pointerdown",r),window.removeEventListener("pointermove",n),window.removeEventListener("pointerup",i),window.removeEventListener("pointercancel",i),window.removeEventListener("keydown",h,!1),window.removeEventListener("keyup",h,!1)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(t=>t()),this._disposables.length=0,this.el=null,this._emitter.emit("unmounted")}on(t,e){return this._emitter.on(t,e)}undo(){const t=this.el;return t.lastElementChild?(this._undoStack.push(t.lastElementChild.cloneNode(!0)),t.lastElementChild.remove(),this._emitter.emit("changed"),!0):!1}redo(){return this._undoStack.length?(this.el.appendChild(this._undoStack.pop()),this._emitter.emit("changed"),!0):!1}canRedo(){return!!this._undoStack.length}canUndo(){var t;return!!((t=this.el)!=null&&t.lastElementChild)}eventMove(t){!this.acceptsInput(t)||!this.drawing||this.model._eventMove(t)&&(t.stopPropagation(),t.preventDefault(),this._emitter.emit("changed"))}eventStart(t){!this.acceptsInput(t)||(t.stopPropagation(),t.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._emitter.emit("start"),this._currentNode=this.model._eventDown(t),this._currentNode&&this.mode!=="eraseLine"&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(t){if(!this.acceptsInput(t)||!this.drawing)return;const e=this.model._eventUp(t);e?(e instanceof Element&&e!==this._currentNode&&(this._currentNode=e),this.commit()):this.cancel(),this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed")}acceptsInput(t){return!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(t.pointerType)}eventKeyboard(t){this.shiftPressed===t.shiftKey&&this.altPressed===t.altKey||(this.shiftPressed=t.shiftKey,this.altPressed=t.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(){this._undoStack.length=0;const t=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",t)}clear(){this._undoStack.length=0,this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(t){this.clear(),this.el.innerHTML=t}};function Jt(t){return new Zt(t)}const d=Jt({el:"#svg",brush:{color:"#000",size:3}});window.addEventListener("keydown",t=>{if(t.code==="KeyZ"&&(t.ctrlKey||t.metaKey)){t.shiftKey?d.redo():d.undo();return}t.shiftKey||t.ctrlKey||t.metaKey||t.altKey||(t.code==="KeyL"?d.mode="line":t.code==="KeyD"?d.mode="draw":t.code==="KeyS"?d.mode="stylus":t.code==="KeyR"?d.mode="rectangle":t.code==="KeyE"?d.mode="ellipse":t.code==="KeyC"?d.clear():t.code==="Equal"?d.brush.size=Math.min(10,d.brush.size+.5):t.code==="Minus"&&(d.brush.size=Math.max(1,d.brush.size-.5)))});var gt;(gt=document.getElementById("undo"))==null||gt.addEventListener("click",()=>d.undo());var pt;(pt=document.getElementById("redo"))==null||pt.addEventListener("click",()=>d.redo());var yt;(yt=document.getElementById("clear"))==null||yt.addEventListener("click",()=>d.clear());var vt;(vt=document.getElementById("download"))==null||vt.addEventListener("click",()=>{d.el.setAttribute("xmlns","http://www.w3.org/2000/svg");const t=d.el.outerHTML||"",e=new Blob([t],{type:"image/svg+xml"}),s=window.document.createElement("a");s.href=window.URL.createObjectURL(e),s.download="drauu.svg",document.body.appendChild(s),s.click(),document.body.removeChild(s)});const ct=document.getElementById("size");ct.addEventListener("input",()=>d.brush.size=+ct.value);const dt=[{el:document.getElementById("m-stylus"),brush:{mode:"stylus",arrowEnd:!1}},{el:document.getElementById("m-eraser"),brush:{mode:"eraseLine",arrowEnd:!1}},{el:document.getElementById("m-draw"),brush:{mode:"draw",arrowEnd:!1}},{el:document.getElementById("m-line"),brush:{mode:"line",arrowEnd:!1}},{el:document.getElementById("m-arrow"),brush:{mode:"line",arrowEnd:!0}},{el:document.getElementById("m-rect"),brush:{mode:"rectangle",arrowEnd:!1}},{el:document.getElementById("m-ellipse"),brush:{mode:"ellipse",arrowEnd:!1}}];dt.forEach(({el:t,brush:e})=>{t.addEventListener("click",()=>{dt.forEach(({el:s})=>s.classList.remove("active")),t.classList.add("active"),d.brush.arrowEnd=e.arrowEnd,d.mode=e.mode})});const ft=[{el:document.getElementById("l-solid"),value:void 0},{el:document.getElementById("l-dashed"),value:"4"},{el:document.getElementById("l-dotted"),value:"1 7"}];ft.forEach(({el:t,value:e})=>{t.addEventListener("click",()=>{ft.forEach(({el:s})=>s.classList.remove("active")),t.classList.add("active"),d.brush.dasharray=e})});const mt=Array.from(document.querySelectorAll("[data-color]"));mt.forEach(t=>{t.addEventListener("click",()=>{mt.forEach(e=>e.classList.remove("active")),t.classList.add("active"),d.brush.color=t.dataset.color})});
